cfgs:
  master:
    branches: ['master']
    inherit:
      cnudie-transport-tool:
        jobs:
          automatic-release:
            steps:
              trigger_release:
                depends: ['component_descriptor']
                inputs:
                  component_descriptor_dir: component_descriptor_dir
                vars:
                  RELEASE_JOB_NAME: 'pipeline.variant("manual-release").job_name()'
          manual-release:
            steps:
              test: ~
              lint: ~
              build_package_and_publish_to_pypi:
                vars:
                  PUBLISH: '"true"'
                trait_depends: ['publish']
            traits:
              scheduling:
                suppress_parallel_execution: true
              release: ~
              version:
                preprocess: finalize
                inject_effective_version: True
              publish:
                dockerimages:
                  cnudie-transport-tool:
                    image: 'eu.gcr.io/gardener-project/cnudie-transport-tool'
                    dockerfile: 'Dockerfile'
                    tag_as_latest: True
                    resource_labels:
                    - name: 'cloud.gardener.cnudie/dso/scanning-hints/binary_id/v1'
                      value:
                        comment: >
                          This image is not exposed to the outside world.
                        policy: 'skip'
          head-update:
            steps:
              test: ~
              lint: ~
            traits:
              publish:
                dockerimages:
                  cnudie-transport-tool:
                    image: 'eu.gcr.io/gardener-project/cnudie-transport-tool'
                    dockerfile: 'Dockerfile'
          create_update_pull_requests:
            repo:
              trigger: false
              disable_ci_skip: true
            traits:
              update_component_deps:
                merge_policy: manual
              cronjob:
                interval: '5m'
